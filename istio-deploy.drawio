<mxfile host="app.diagrams.net" modified="2022-03-01T09:38:09.948Z" agent="5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.109 Safari/537.36" etag="anLA4DAWSYp-MWkqrRnO" version="16.5.6" type="github">
  <diagram id="1AcJaDzlzkorBh6IL32U" name="第 1 页">
    <mxGraphModel dx="1747" dy="1681" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="zcJ7lCNdR5RqkjKMGWOm-2" value="K8S集群 with Istio" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="-40" y="70" width="910" height="660" as="geometry" />
        </mxCell>
        <mxCell id="zcJ7lCNdR5RqkjKMGWOm-3" value="K8S Service&lt;br&gt;befriend-service-gateway&lt;br&gt;prod" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="170" y="200" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="zcJ7lCNdR5RqkjKMGWOm-4" value="K8S Service&lt;br&gt;befriend-service-gateway&lt;br&gt;gray" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="530" y="200" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="zcJ7lCNdR5RqkjKMGWOm-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;curved=1;" edge="1" parent="1" source="zcJ7lCNdR5RqkjKMGWOm-5" target="zcJ7lCNdR5RqkjKMGWOm-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="zcJ7lCNdR5RqkjKMGWOm-8" value="header env=prod or null" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="zcJ7lCNdR5RqkjKMGWOm-6">
          <mxGeometry x="0.076" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="zcJ7lCNdR5RqkjKMGWOm-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.563;entryY=-0.001;entryDx=0;entryDy=0;entryPerimeter=0;curved=1;" edge="1" parent="1" source="zcJ7lCNdR5RqkjKMGWOm-5" target="zcJ7lCNdR5RqkjKMGWOm-4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="zcJ7lCNdR5RqkjKMGWOm-9" value="header env=gray" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="zcJ7lCNdR5RqkjKMGWOm-7">
          <mxGeometry x="-0.1167" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="zcJ7lCNdR5RqkjKMGWOm-5" value="istio-gateway&lt;br&gt;host:api-prod.jinweihaowu.com" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="340" y="100" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="zcJ7lCNdR5RqkjKMGWOm-17" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="zcJ7lCNdR5RqkjKMGWOm-10" target="zcJ7lCNdR5RqkjKMGWOm-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="zcJ7lCNdR5RqkjKMGWOm-10" value="阿里云SLB" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="375" y="-30" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="zcJ7lCNdR5RqkjKMGWOm-13" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="zcJ7lCNdR5RqkjKMGWOm-11" target="zcJ7lCNdR5RqkjKMGWOm-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="zcJ7lCNdR5RqkjKMGWOm-15" value="request header env=prod or null" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="zcJ7lCNdR5RqkjKMGWOm-13">
          <mxGeometry x="-0.6409" y="-3" relative="1" as="geometry">
            <mxPoint x="56" y="7" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="zcJ7lCNdR5RqkjKMGWOm-11" value="前端prod页面" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="-180" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="zcJ7lCNdR5RqkjKMGWOm-14" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="zcJ7lCNdR5RqkjKMGWOm-12" target="zcJ7lCNdR5RqkjKMGWOm-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="zcJ7lCNdR5RqkjKMGWOm-16" value="reqeust header env=gray" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="zcJ7lCNdR5RqkjKMGWOm-14">
          <mxGeometry x="-0.0621" y="11" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="zcJ7lCNdR5RqkjKMGWOm-12" value="前端gray页面" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="640" y="-180" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="zcJ7lCNdR5RqkjKMGWOm-20" value="Istio Virtaul Service&lt;br&gt;befriend-service-supplier&lt;br&gt;route:&lt;br&gt;&lt;span style=&quot;white-space: pre&quot;&gt;	&lt;/span&gt;env=prod or null -&amp;gt; subset-prod&lt;br&gt;&lt;span style=&quot;white-space: pre&quot;&gt;	&lt;/span&gt;env=gray -&amp;gt; subset-gray" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="190" y="340" width="480" height="320" as="geometry" />
        </mxCell>
        <mxCell id="zcJ7lCNdR5RqkjKMGWOm-23" value="K8S Service&lt;br&gt;befriend-service-supplier&lt;br&gt;podLabel app=supplier" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="345" y="440" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="zcJ7lCNdR5RqkjKMGWOm-24" value="Istio Destination Rule" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="220" y="550" width="430" height="100" as="geometry" />
        </mxCell>
        <mxCell id="zcJ7lCNdR5RqkjKMGWOm-22" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="zcJ7lCNdR5RqkjKMGWOm-4" target="zcJ7lCNdR5RqkjKMGWOm-23">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="zcJ7lCNdR5RqkjKMGWOm-32" value="env=gray" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="zcJ7lCNdR5RqkjKMGWOm-22">
          <mxGeometry x="-0.6985" y="-15" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="zcJ7lCNdR5RqkjKMGWOm-21" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.461;exitY=1.01;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="zcJ7lCNdR5RqkjKMGWOm-3" target="zcJ7lCNdR5RqkjKMGWOm-23">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="zcJ7lCNdR5RqkjKMGWOm-31" value="env=prod or null" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="zcJ7lCNdR5RqkjKMGWOm-21">
          <mxGeometry x="-0.7037" y="14" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="zcJ7lCNdR5RqkjKMGWOm-25" value="Istio Subset&lt;br&gt;name=prod&lt;br&gt;podLabel env=prod" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="240" y="570" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="zcJ7lCNdR5RqkjKMGWOm-26" value="Istio Subset&lt;br&gt;name=gray&lt;br&gt;podLable env=gray" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="500" y="570" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="zcJ7lCNdR5RqkjKMGWOm-27" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="zcJ7lCNdR5RqkjKMGWOm-23" target="zcJ7lCNdR5RqkjKMGWOm-25">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="zcJ7lCNdR5RqkjKMGWOm-29" value="env=prod or null" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="zcJ7lCNdR5RqkjKMGWOm-27">
          <mxGeometry x="0.0719" y="-3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="zcJ7lCNdR5RqkjKMGWOm-28" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="zcJ7lCNdR5RqkjKMGWOm-23" target="zcJ7lCNdR5RqkjKMGWOm-26">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="zcJ7lCNdR5RqkjKMGWOm-30" value="env=gray" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="zcJ7lCNdR5RqkjKMGWOm-28">
          <mxGeometry x="-0.2558" y="2" relative="1" as="geometry">
            <mxPoint x="11" y="-3" as="offset" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
